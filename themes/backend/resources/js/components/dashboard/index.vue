<template>
    <div>
        <div class="row">
            <div class="col-12 d-flex align-items-center justify-content-end">
                <el-date-picker @change="getAllData" v-model="date_search" type="daterange" :picker-options="picker_option"
                    range-separator="-" start-placeholder="Từ ngày" end-placeholder="Đến ngày" format="dd/MM/yyyy"
                    value-format="dd/MM/yyyy" align="right">
                </el-date-picker>
            </div>
        </div>
        <div class="row box-dashboard d-flex">
            <div class="col-12">
                <h3 class="title-box">Kết quả <span v-if="date_search">{{ date_search[0] }} -
                        {{ date_search[1] }}</span></h3>
            </div>
            <div class="w-20">
                <div class="small-box d-flex align-items-center justify-content-between"
                    style="background-color: var(--dark-blue, #015E99);">
                    <div class="inner">
                        <h3>{{ summary_kcb.total }}</h3>
                        <p>Lượt liên thông <br>
                            dữ liệu KCB</p>
                    </div>
                    <div class="svg-icon">
                        <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="36" cy="36" r="36" fill="white" />
                            <g clip-path="url(#clip0_0_1)">
                                <path
                                    d="M51.1 36.9H45.8V34.1C45.8 33.6 45.4 33.2 44.9 33.2H37V31.2H39.8C40.3 31.2 40.7 30.8 40.7 30.3C40.7 29.8 40.3 29.4 39.8 29.4H39.3L39 27.4H42.3C42.8 27.4 43.2 27 43.2 26.5V18.9C43.2 18.4 42.8 18 42.3 18H29.8C29.2 18 28.8 18.4 28.8 18.9V26.4C28.8 26.9 29.2 27.3 29.7 27.3H33L32.7 29.2H32.2C31.7 29.2 31.3 29.6 31.3 30.1C31.3 30.6 31.7 31 32.2 31H35V33H27.2C26.7 33 26.3 33.4 26.3 33.9V36.7H20.9C20.4 36.7 20 37.1 20 37.6V45.1C20 45.6 20.4 46 20.9 46H24.2L23.9 47.9H23.4C22.9 47.9 22.5 48.3 22.5 48.8C22.5 49.3 22.9 50 23.4 50H30.9C31.4 50 31.8 49.6 31.8 49.1C31.8 48.6 31.4 48.2 30.9 48.2H30.4L30.1 46.3H33.4C33.9 46.3 34.3 45.9 34.3 45.4V37.9C34.3 37.4 33.9 37 33.4 37H28.1V35H43.9V36.9H38.6C38.1 36.9 37.7 37.3 37.7 37.8V45.3C37.7 45.8 38.1 46.2 38.6 46.2H41.9L41.6 48.1H41.1C40.6 48.1 40.2 48.5 40.2 49C40.2 49.5 40.6 49.9 41.1 49.9H48.6C49.1 49.9 49.5 49.5 49.5 49C49.5 48.5 49.1 48.1 48.6 48.1H48.1L47.8 46.2H51.1C51.6 46.2 52 45.8 52 45.3V37.8C52 37.3 51.6 36.9 51.1 36.9ZM30.7 19.9H41.3V25.5H30.7V19.9ZM34.9 27.4H37.1L37.4 29.3H34.6L34.9 27.4ZM28.6 48.1H25.8L26.1 46.2H28.3L28.6 48.1ZM32.5 44.4H21.9V38.8H32.5V44.4ZM46.2 48.1H43.4L43.7 46.2H45.9L46.2 48.1ZM50.1 44.4H39.5V38.8H50.1V44.4Z"
                                    fill="#015E99" />
                            </g>
                            <defs>
                                <clipPath id="clip0_0_1">
                                    <rect width="32" height="32" fill="white" transform="translate(20 18)" />
                                </clipPath>
                            </defs>
                        </svg>
                    </div>
                </div>
            </div>
            <div class="w-20">
                <div class="small-box d-flex align-items-center justify-content-between"
                    style="background: var(--Blue, #1790C9);">
                    <div class="inner">
                        <h3 class="d-flex align-items-center">
                            <span>{{ summary_kcb.not_done }}</span>
                            <div class="border-index"></div>
                            <span>{{ summary_kcb.not_done_percent }}%</span>
                        </h3>
                        <p>Chưa hoàn
                            thành khám </p>
                    </div>
                    <div class="svg-icon">
                        <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="36" cy="36" r="36" fill="white" />
                            <g clip-path="url(#clip0_0_1)">
                                <path
                                    d="M49.7 25.3L44.7 20.3C44.3 19.9 43.7 19.9 43.4 20.3C43 20.7 43 21.3 43.4 21.6L45.2 23.4L41 27.6L38 24.6C37.6 24.2 37 24.2 36.7 24.6C36.3 25 36.3 25.6 36.7 25.9L37 26.2L28.3 34.9C27.2 36 26.7 37.5 27 39L24.4 41.6C24 42 24 42.6 24.3 43L25 43.7L18.3 50.4C17.9 50.8 17.9 51.4 18.3 51.7C18.5 51.9 18.7 52 18.9 52C19.1 52 19.4 51.9 19.6 51.7L26.3 45L27 45.7C27.2 45.9 27.4 46 27.7 46C27.9 46 28.2 45.9 28.4 45.7L31 43C32.5 43.2 34.1 42.8 35.2 41.7L43.9 33L44.1 33.2C44.3 33.4 44.5 33.5 44.8 33.5C45.1 33.5 45.3 33.4 45.5 33.2C45.9 32.8 45.9 32.2 45.5 31.9L42.5 28.9L46.7 24.7L48.5 26.5C48.7 26.7 48.9 26.8 49.2 26.8C49.4 26.8 49.7 26.7 49.9 26.5C50.1 26.2 50.1 25.6 49.7 25.3ZM33.8 40.3C33 41.1 31.9 41.3 30.9 41C30.6 40.9 30.2 41 30 41.2L27.7 43.5L26.4 42.2L28.7 39.9C28.9 39.7 29 39.3 28.9 39C28.7 38.2 28.8 37.3 29.3 36.5L30 37.2C30.2 37.4 30.4 37.5 30.7 37.5C30.9 37.5 31.2 37.4 31.4 37.2C31.8 36.8 31.8 36.2 31.4 35.9L30.7 35.2L32 33.9L32.7 34.6C32.9 34.8 33.1 34.9 33.4 34.9C33.6 34.9 33.9 34.8 34.1 34.6C34.5 34.2 34.5 33.6 34.1 33.3L33.4 32.6L34.7 31.3L38.9 35.5L33.8 40.3ZM40 34.2L35.8 30L38.3 27.5L42.5 31.7L40 34.2Z"
                                    fill="#1790C9" />
                            </g>
                            <defs>
                                <clipPath id="clip0_0_1">
                                    <rect width="32" height="32" fill="white" transform="translate(18 20)" />
                                </clipPath>
                            </defs>
                        </svg>

                    </div>
                </div>
            </div>
            <div class="w-20">
                <div class="small-box d-flex align-items-center justify-content-between"
                    style="background: var(--cyan, #119DB5);">
                    <div class="inner">
                        <h3 class="d-flex align-items-center">
                            <span>{{ summary_kcb.new_kcb }}</span>
                            <div class="border-index"></div>
                            <span>{{ summary_kcb.new_percent }}%</span>
                        </h3>
                        <p>Lượt khám mới</p>
                    </div>
                    <div class="svg-icon">
                        <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="36" cy="36" r="36" fill="white" />
                            <g clip-path="url(#clip0_0_1)">
                                <path
                                    d="M51.1 36.9H45.8V34.1C45.8 33.6 45.4 33.2 44.9 33.2H37V31.2H39.8C40.3 31.2 40.7 30.8 40.7 30.3C40.7 29.8 40.3 29.4 39.8 29.4H39.3L39 27.4H42.3C42.8 27.4 43.2 27 43.2 26.5V18.9C43.2 18.4 42.8 18 42.3 18H29.8C29.2 18 28.8 18.4 28.8 18.9V26.4C28.8 26.9 29.2 27.3 29.7 27.3H33L32.7 29.2H32.2C31.7 29.2 31.3 29.6 31.3 30.1C31.3 30.6 31.7 31 32.2 31H35V33H27.2C26.7 33 26.3 33.4 26.3 33.9V36.7H20.9C20.4 36.7 20 37.1 20 37.6V45.1C20 45.6 20.4 46 20.9 46H24.2L23.9 47.9H23.4C22.9 47.9 22.5 48.3 22.5 48.8C22.5 49.3 22.9 50 23.4 50H30.9C31.4 50 31.8 49.6 31.8 49.1C31.8 48.6 31.4 48.2 30.9 48.2H30.4L30.1 46.3H33.4C33.9 46.3 34.3 45.9 34.3 45.4V37.9C34.3 37.4 33.9 37 33.4 37H28.1V35H43.9V36.9H38.6C38.1 36.9 37.7 37.3 37.7 37.8V45.3C37.7 45.8 38.1 46.2 38.6 46.2H41.9L41.6 48.1H41.1C40.6 48.1 40.2 48.5 40.2 49C40.2 49.5 40.6 49.9 41.1 49.9H48.6C49.1 49.9 49.5 49.5 49.5 49C49.5 48.5 49.1 48.1 48.6 48.1H48.1L47.8 46.2H51.1C51.6 46.2 52 45.8 52 45.3V37.8C52 37.3 51.6 36.9 51.1 36.9ZM30.7 19.9H41.3V25.5H30.7V19.9ZM34.9 27.4H37.1L37.4 29.3H34.6L34.9 27.4ZM28.6 48.1H25.8L26.1 46.2H28.3L28.6 48.1ZM32.5 44.4H21.9V38.8H32.5V44.4ZM46.2 48.1H43.4L43.7 46.2H45.9L46.2 48.1ZM50.1 44.4H39.5V38.8H50.1V44.4Z"
                                    fill="#119DB5" />
                            </g>
                            <defs>
                                <clipPath id="clip0_0_1">
                                    <rect width="32" height="32" fill="white" transform="translate(20 18)" />
                                </clipPath>
                            </defs>
                        </svg>

                    </div>
                </div>
            </div>
            <div class="w-20">
                <div class="small-box d-flex align-items-center justify-content-between" style="background:#65A7F5">
                    <div class="inner">
                        <h3 class="d-flex align-items-center">
                            <span>{{ summary_kcb.again_kcb }}</span>
                            <div class="border-index"></div>
                            <span>{{ summary_kcb.again_percent }}%</span>
                        </h3>
                        <p>Lượt tái khám</p>
                    </div>
                    <div class="svg-icon">
                        <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="36" cy="36" r="36" fill="white" />
                            <g clip-path="url(#clip0_0_1)">
                                <path
                                    d="M51.1 36.9H45.8V34.1C45.8 33.6 45.4 33.2 44.9 33.2H37V31.2H39.8C40.3 31.2 40.7 30.8 40.7 30.3C40.7 29.8 40.3 29.4 39.8 29.4H39.3L39 27.4H42.3C42.8 27.4 43.2 27 43.2 26.5V18.9C43.2 18.4 42.8 18 42.3 18H29.8C29.2 18 28.8 18.4 28.8 18.9V26.4C28.8 26.9 29.2 27.3 29.7 27.3H33L32.7 29.2H32.2C31.7 29.2 31.3 29.6 31.3 30.1C31.3 30.6 31.7 31 32.2 31H35V33H27.2C26.7 33 26.3 33.4 26.3 33.9V36.7H20.9C20.4 36.7 20 37.1 20 37.6V45.1C20 45.6 20.4 46 20.9 46H24.2L23.9 47.9H23.4C22.9 47.9 22.5 48.3 22.5 48.8C22.5 49.3 22.9 50 23.4 50H30.9C31.4 50 31.8 49.6 31.8 49.1C31.8 48.6 31.4 48.2 30.9 48.2H30.4L30.1 46.3H33.4C33.9 46.3 34.3 45.9 34.3 45.4V37.9C34.3 37.4 33.9 37 33.4 37H28.1V35H43.9V36.9H38.6C38.1 36.9 37.7 37.3 37.7 37.8V45.3C37.7 45.8 38.1 46.2 38.6 46.2H41.9L41.6 48.1H41.1C40.6 48.1 40.2 48.5 40.2 49C40.2 49.5 40.6 49.9 41.1 49.9H48.6C49.1 49.9 49.5 49.5 49.5 49C49.5 48.5 49.1 48.1 48.6 48.1H48.1L47.8 46.2H51.1C51.6 46.2 52 45.8 52 45.3V37.8C52 37.3 51.6 36.9 51.1 36.9ZM30.7 19.9H41.3V25.5H30.7V19.9ZM34.9 27.4H37.1L37.4 29.3H34.6L34.9 27.4ZM28.6 48.1H25.8L26.1 46.2H28.3L28.6 48.1ZM32.5 44.4H21.9V38.8H32.5V44.4ZM46.2 48.1H43.4L43.7 46.2H45.9L46.2 48.1ZM50.1 44.4H39.5V38.8H50.1V44.4Z"
                                    fill="#119DB5" />
                            </g>
                            <defs>
                                <clipPath id="clip0_0_1">
                                    <rect width="32" height="32" fill="white" transform="translate(20 18)" />
                                </clipPath>
                            </defs>
                        </svg>

                    </div>
                </div>
            </div>
        </div>
        <div class="row box-dashboard d-flex line-chart">
            <div class="col-12">
                <h3 class="title-box">Số lượt khám chưa bệnh</h3>
            </div>
            <div class="col-12">
                <LineChart height="400" :data="dataLineChartNumberExamination" :options="optionsLine" />
            </div>
        </div>


        <div class="row box-dashboard d-flex">
            <div class="col-12">
                <h3 class="title-box">Thống kê bệnh nhân</h3>
            </div>
            <div class="w-20">

                <div class="small-box d-flex align-items-center justify-content-between"
                    style="background: var(--dark-blue, #015E99);">
                    <div class="inner">
                        <h3>{{ summary_patient.total }}</h3>
                        <span>
                            Tổng số
                        </span>
                        <b>bệnh nhân</b>
                    </div>
                    <div class="svg-icon">
                        <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="36" cy="36" r="36" fill="white" />
                            <g clip-path="url(#clip0_0_1)">
                                <path
                                    d="M47.3 36.9996H44.2C43.8 36.9996 43.4 37.0996 43 37.1996C42.2 35.6996 40.6 34.5996 38.8 34.5996H33.3C31.5 34.5996 29.9 35.5996 29.1 37.1996C28.7 37.0996 28.2 36.9996 27.8 36.9996H24.7C22.1 36.9996 20 39.0996 20 41.6996V46.6996C20 48.2996 21.3 49.4996 22.8 49.4996H49.2C50.8 49.4996 52 48.1996 52 46.6996V41.6996C52 39.0996 49.9 36.9996 47.3 36.9996ZM50.1 46.6996C50.1 47.1996 49.7 47.5996 49.2 47.5996H43.5V39.2996C43.5 39.1996 43.5 39.0996 43.5 38.9996C43.7 38.8996 44 38.8996 44.2 38.8996H47.3C48.9 38.8996 50.1 40.1996 50.1 41.6996V46.6996ZM22.8 47.6996C22.3 47.6996 21.9 47.2996 21.9 46.7996V41.7996C21.9 40.1996 23.2 38.9996 24.7 38.9996H27.8C28.1 38.9996 28.3 38.9996 28.5 39.0996C28.5 39.1996 28.5 39.2996 28.5 39.3996V47.6996H22.8ZM33.2 36.4996H38.7C40.3 36.4996 41.5 37.7996 41.5 39.2996V47.5996H30.4V39.2996C30.4 37.7996 31.7 36.4996 33.2 36.4996Z"
                                    fill="#015E99" />
                                <path
                                    d="M26.3016 36.5002C28.6016 36.5002 30.5016 34.6002 30.5016 32.3002C30.5016 30.0002 28.6016 28.2002 26.3016 28.2002C24.0016 28.2002 22.1016 30.0002 22.1016 32.3002C22.1016 34.6002 24.0016 36.5002 26.3016 36.5002ZM28.5016 32.3002C28.5016 33.6002 27.5016 34.6002 26.2016 34.6002C24.9016 34.6002 24.0016 33.6002 24.0016 32.3002C24.0016 31.0002 25.0016 30.0002 26.3016 30.0002C27.6016 30.0002 28.5016 31.1002 28.5016 32.3002Z"
                                    fill="#015E99" />
                                <path
                                    d="M35.9984 34.1C39.0984 34.1 41.5984 31.6 41.5984 28.5C41.5984 25.4 39.0984 23 35.9984 23C32.8984 23 30.3984 25.5 30.3984 28.6C30.3984 31.7 32.8984 34.1 35.9984 34.1ZM35.9984 24.9C37.9984 24.9 39.6984 26.6 39.6984 28.6C39.6984 30.6 37.9984 32.3 35.9984 32.3C33.9984 32.3 32.2984 30.6 32.2984 28.6C32.2984 26.5 33.9984 24.9 35.9984 24.9Z"
                                    fill="#015E99" />
                                <path
                                    d="M45.7 36.5002C48 36.5002 49.9 34.6002 49.9 32.3002C49.9 30.0002 48 28.2002 45.7 28.2002C43.4 28.2002 41.5 30.1002 41.5 32.4002C41.6 34.6002 43.4 36.5002 45.7 36.5002ZM45.7 30.0002C47 30.0002 48 31.1002 48 32.3002C48 33.5002 47 34.6002 45.7 34.6002C44.4 34.6002 43.4 33.6002 43.4 32.3002C43.5 31.1002 44.5 30.0002 45.7 30.0002Z"
                                    fill="#015E99" />
                            </g>
                            <defs>
                                <clipPath id="clip0_0_1">
                                    <rect width="32" height="26.5" fill="white" transform="translate(20 23)" />
                                </clipPath>
                            </defs>
                        </svg>
                    </div>
                </div>
            </div>
            <div class="w-20">

                <div class="small-box d-flex align-items-center justify-content-between bg-white">
                    <div class="inner text-dark">
                        <h3>{{ summary_patient.children }}</h3>
                        <p>Trẻ em</p>
                        <div class="account_percent">
                            <span>Chiếm</span>
                            <b>{{ summary_patient.children_percent }}%</b>
                        </div>
                    </div>
                    <div class="svg-icon">
                        <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="36" cy="36" r="36" fill="url(#paint0_linear_0_1)" />
                            <g clip-path="url(#clip0_0_1)">
                                <path
                                    d="M51.7001 26.3997C48.7001 21.5997 44.8001 20.6997 40.6001 23.5997C37.8001 21.4997 34.0001 21.4997 31.2001 23.5997C27.1001 20.7997 23.1001 21.5997 20.1001 26.3997C19.9001 26.7997 20.0001 27.2997 20.3001 27.5997L24.3001 31.0997C24.7001 31.4997 25.3001 31.3997 25.7001 30.9997C25.7001 30.9997 26.4001 29.9997 27.5001 29.3997C27.7001 29.2997 27.9001 29.1997 28.1001 29.0997C27.9001 30.7997 28.3001 32.4997 29.1001 33.8997L24.1001 37.6997C22.8001 38.6997 22.5001 40.4997 23.5001 41.7997C24.5001 43.0997 26.3001 43.3997 27.6001 42.3997L28.1001 41.9997L26.6001 47.6997C26.4001 48.2997 26.9001 48.8997 27.5001 48.8997H29.0001V50.9997C29.0001 52.5997 30.3001 53.8997 31.9001 53.8997C33.5001 53.8997 34.8001 52.5997 34.8001 50.9997V48.8997H37.0001V50.9997C37.0001 52.5997 38.3001 53.8997 39.9001 53.8997C41.5001 53.8997 42.8001 52.5997 42.8001 50.9997V48.8997H44.4001C45.0001 48.8997 45.5001 48.2997 45.3001 47.6997L43.8001 41.9997L44.3001 42.3997C44.9001 42.8997 45.7001 43.0997 46.5001 42.9997C48.1001 42.7997 49.2001 41.2997 49.0001 39.6997C48.9001 38.8997 48.5001 38.1997 47.9001 37.7997L42.9001 33.9997C43.7001 32.4997 44.1001 30.7997 43.9001 29.1997C44.1001 29.2997 44.3001 29.3997 44.5001 29.4997C45.5001 29.9997 46.2001 30.9997 46.2001 30.9997C46.5001 31.3997 47.2001 31.4997 47.6001 31.0997L51.6001 27.5997C51.9001 27.2997 52.0001 26.7997 51.7001 26.3997ZM35.9001 23.8997C38.3001 23.8997 40.4001 25.2997 41.4001 27.2997C39.0001 27.9997 37.9001 27.6997 37.4001 27.3997C37.0001 27.2997 36.9001 26.9997 36.9001 26.9997C36.9001 26.4997 36.5001 26.0997 36.0001 26.0997C35.4001 26.0997 35.0001 26.4997 35.0001 26.9997C35.0001 26.9997 34.9001 27.2997 34.5001 27.4997C34.0001 27.7997 32.9001 28.0997 30.5001 27.3997C31.5001 25.2997 33.5001 23.8997 35.9001 23.8997ZM29.9001 29.1997C31.8001 29.7997 34.4001 30.0997 35.9001 28.7997C37.4001 30.0997 40.0001 29.7997 41.9001 29.1997C42.4001 32.8997 39.6001 36.0997 35.9001 36.0997C32.3001 36.0997 29.4001 32.7997 29.9001 29.1997ZM28.6001 26.9997C27.1001 27.1997 25.9001 27.9997 24.9001 29.0997L22.2001 26.7997C24.3001 23.7997 26.7001 22.9997 29.9001 24.9997C29.3001 25.5997 28.9001 26.2997 28.6001 26.9997ZM26.4001 40.8997C25.9001 41.2997 25.3001 41.1997 24.9001 40.6997C24.5001 40.1997 24.6001 39.5997 25.1001 39.1997L29.7001 35.6997L28.8001 38.9997L26.4001 40.8997ZM33.0001 51.0997C33.0001 51.6997 32.5001 52.1997 31.9001 52.1997C31.3001 52.1997 30.8001 51.6997 30.8001 51.0997V48.9997H33.0001V51.0997ZM41.0001 51.0997C41.0001 51.6997 40.5001 52.1997 39.9001 52.1997C39.3001 52.1997 38.8001 51.6997 38.8001 51.0997V48.9997H41.0001V51.0997ZM28.7001 47.0997L31.5001 36.5997C34.2001 38.3997 37.7001 38.4997 40.5001 36.5997L43.3001 47.0997H28.7001ZM46.7001 39.1997C47.2001 39.5997 47.3001 40.1997 46.9001 40.6997C46.5001 41.1997 45.9001 41.2997 45.4001 40.8997L43.0001 39.0997L42.1001 35.7997L46.7001 39.1997ZM47.0001 29.0997C46.0001 27.9997 44.8001 27.1997 43.3001 26.9997C43.0001 26.2997 42.6001 25.5997 42.1001 24.9997C45.0001 23.1997 47.5001 23.5997 49.8001 26.7997L47.0001 29.0997Z"
                                    fill="white" />
                            </g>
                            <defs>
                                <linearGradient id="paint0_linear_0_1" x1="72" y1="36.0001" x2="-5.625" y2="36.0001"
                                    gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#1976CC" />
                                    <stop offset="1" stop-color="#0FABCD" />
                                </linearGradient>
                                <clipPath id="clip0_0_1">
                                    <rect width="31.9" height="32" fill="white" transform="translate(20 22)" />
                                </clipPath>
                            </defs>
                        </svg>

                    </div>
                </div>
            </div>
            <div class="w-20">
                <div class="small-box d-flex align-items-center justify-content-between bg-white">
                    <div class="inner text-dark">
                        <h3>{{ summary_patient.female }}</h3>
                        <p>Phụ nữ</p>
                        <div class="account_percent">
                            <span>Chiếm</span>
                            <b>{{ summary_patient.female_percent }}%</b>
                        </div>
                    </div>
                    <div class="svg-icon">
                        <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="36" cy="36" r="36" fill="url(#paint0_linear_0_1)" />
                            <g clip-path="url(#clip0_0_1)">
                                <path
                                    d="M46.3009 38.9004L44.2009 33.7004C43.9009 32.9004 42.6009 30.0004 39.0009 28.6004C40.0009 27.7004 40.7009 26.4004 40.7009 24.9004C40.7009 22.2004 38.5009 19.9004 35.7009 19.9004C32.9009 19.9004 30.7009 22.1004 30.7009 24.9004C30.7009 26.4004 31.3009 27.7004 32.4009 28.6004C28.9009 30.0004 27.6009 33.0004 27.3009 33.7004L25.2009 38.9004C24.8009 39.8004 24.9009 40.8004 25.5009 41.7004C25.8009 42.1004 26.7009 43.2004 28.3009 43.0004L27.8009 44.9004C27.7009 45.4004 28.1009 46.0004 28.7009 46.0004H30.8009V51.1004C30.8009 51.6004 31.2009 52.0004 31.7009 52.0004H39.7009C40.2009 52.0004 40.6009 51.6004 40.6009 51.1004V46.0004H42.7009C43.3009 46.0004 43.8009 45.4004 43.6009 44.8004L43.1009 42.9004C44.7009 43.1004 45.6009 42.0004 45.9009 41.6004C46.6009 40.8004 46.7009 39.8004 46.3009 38.9004ZM35.8009 21.9004C37.5009 21.9004 38.9009 23.3004 38.9009 25.0004C38.9009 26.7004 37.5009 28.0004 35.8009 28.0004C34.1009 28.0004 32.7009 26.7004 32.7009 25.0004C32.7009 23.3004 34.1009 21.9004 35.8009 21.9004ZM27.1009 40.6004C26.9009 40.3004 26.9009 39.9004 27.0009 39.6004L29.0009 34.4004C29.5009 33.3004 30.2009 32.3004 31.1009 31.5004L30.2009 35.3004C29.7009 37.2004 29.3009 39.0004 29.0009 40.3004C28.7009 41.2004 27.6009 41.4004 27.1009 40.6004ZM34.8009 50.1004H32.7009V46.0004H34.8009V50.1004ZM38.8009 50.1004H36.7009V46.0004H38.8009V50.1004ZM29.9009 44.1004L32.9009 32.1004C33.2009 30.8004 34.4009 29.9004 35.7009 29.9004C37.0009 29.9004 38.2009 30.8004 38.5009 32.1004L41.5009 44.1004H29.9009ZM44.5009 40.6004C44.0009 41.4004 42.8009 41.2004 42.6009 40.3004L40.4009 31.6004C41.3009 32.4004 42.0009 33.3004 42.5009 34.5004L44.6009 39.7004C44.7009 39.9004 44.7009 40.3004 44.5009 40.6004Z"
                                    fill="white" />
                            </g>
                            <defs>
                                <linearGradient id="paint0_linear_0_1" x1="72" y1="36.0001" x2="-5.625" y2="36.0001"
                                    gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#1976CC" />
                                    <stop offset="1" stop-color="#0FABCD" />
                                </linearGradient>
                                <clipPath id="clip0_0_1">
                                    <rect width="21.5" height="32" fill="white" transform="translate(25 20)" />
                                </clipPath>
                            </defs>
                        </svg>
                    </div>
                </div>
            </div>
            <div class="w-20">
                <div class="small-box d-flex align-items-center justify-content-between bg-white">
                    <div class="inner text-dark">
                        <h3>{{ summary_patient.old }}</h3>
                        <p>Người cao tuổi</p>
                        <div class="account_percent">
                            <span>Chiếm</span>
                            <b>{{ summary_patient.old_percent }}%</b>
                        </div>
                    </div>
                    <div class="svg-icon">
                        <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="36" cy="36" r="36" fill="url(#paint0_linear_0_1)" />
                            <g clip-path="url(#clip0_0_1)">
                                <path
                                    d="M48.9984 50.9997L47.9984 38.3997C47.8984 37.1997 47.0984 36.1997 46.0984 35.7997C46.1984 35.0997 45.9984 34.2997 45.3984 33.7997C38.6984 26.7997 39.0984 27.2997 38.8984 27.0997C40.0984 26.4997 40.9984 25.1997 40.9984 23.7997C40.9984 21.6997 39.2984 20.0997 37.1984 20.0997C34.6984 19.9997 32.8984 22.3997 33.5984 24.7997C30.1984 24.4997 27.3984 26.4997 26.2984 29.2997L25.0984 32.2997C24.9984 32.5997 24.9984 32.7997 25.0984 32.9997L25.9984 34.9997C25.9984 35.0997 25.9984 45.1997 25.9984 45.2997C25.9984 45.7997 26.3984 46.1997 26.8984 46.1997L28.7984 46.3997V50.9997C28.7984 51.4997 29.1984 51.8997 29.6984 51.8997H37.1984C37.6984 51.8997 38.0984 51.4997 38.0984 50.9997V47.1997C38.5984 47.1997 38.9984 46.7997 38.9984 46.2997V34.8997L42.3984 37.1997C41.8984 38.0997 42.0984 38.6997 42.0984 39.5997C42.0984 40.0997 42.5984 40.4997 43.0984 40.4997C43.5984 40.4997 43.9984 39.9997 43.9984 39.4997C43.8984 38.6997 43.7984 38.2997 44.1984 37.8997C44.7984 37.1997 45.9984 37.5997 46.0984 38.4997L46.9984 51.0997C46.9984 51.5997 47.4984 51.9997 47.9984 51.9997C48.5984 51.9997 48.9984 51.4997 48.9984 50.9997ZM37.1984 21.8997C38.1984 21.8997 39.0984 22.6997 39.0984 23.7997C39.0984 24.8997 38.2984 25.6997 37.1984 25.6997C36.1984 25.6997 35.2984 24.8997 35.2984 23.7997C35.2984 22.6997 36.1984 21.8997 37.1984 21.8997ZM27.7984 39.3997C28.2984 40.3997 29.4984 40.7997 30.5984 40.3997C31.6984 39.9997 32.2984 38.6997 31.8984 37.5997L30.4984 33.0997L31.7984 30.6997C31.9984 30.1997 31.8984 29.6997 31.3984 29.3997C30.9984 29.2997 30.3984 29.4997 30.0984 29.8997L28.5984 32.5997C28.4984 32.7997 28.4984 33.0997 28.4984 33.2997L30.0984 38.0997C30.1984 38.4997 29.6984 38.7997 29.3984 38.3997L26.9984 32.6997L27.9984 29.9997C29.5984 25.8997 34.8984 25.6997 37.8984 28.7997C44.4984 35.5997 44.0984 35.1997 44.1984 35.2997C44.3984 35.4997 44.3984 35.6997 44.1984 35.8997C44.0984 35.8997 44.0984 35.8997 43.9984 35.9997C43.7984 35.9997 44.1984 36.1997 38.6984 32.4997C38.0984 32.0997 37.1984 32.4997 37.1984 33.2997V45.3997L27.7984 44.5997V39.3997ZM30.5984 46.5997L32.4984 46.7997V50.0997H30.5984V46.5997ZM34.3984 50.0997V46.8997L36.2984 47.0997V50.0997H34.3984Z"
                                    fill="white" />
                            </g>
                            <defs>
                                <linearGradient id="paint0_linear_0_1" x1="72" y1="36.0001" x2="-5.625" y2="36.0001"
                                    gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#1976CC" />
                                    <stop offset="1" stop-color="#0FABCD" />
                                </linearGradient>
                                <clipPath id="clip0_0_1">
                                    <rect width="24" height="32" fill="white" transform="translate(25 20)" />
                                </clipPath>
                            </defs>
                        </svg>
                    </div>
                </div>
            </div>
            <div class="w-20">
                <div class="small-box d-flex align-items-center justify-content-between bg-white">
                    <div class="inner text-dark">
                        <h3>{{ summary_patient.male }}</h3>
                        <p>Nam</p>
                        <div class="account_percent">
                            <span>Chiếm</span>
                            <b>{{ summary_patient.male_percent }}%</b>
                        </div>
                    </div>
                    <div class="svg-icon">
                        <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="36" cy="36" r="36" fill="url(#paint0_linear_0_1)" />
                            <g clip-path="url(#clip0_0_1)">
                                <mask id="path-2-inside-1_0_1" fill="white">
                                    <path
                                        d="M52 31.8909V41.1091C52 41.7 51.7083 42.2023 51.125 42.6159C50.5417 43.0295 49.8333 43.2364 49 43.2364C48.1667 43.2364 47.4583 43.0295 46.875 42.6159C46.2917 42.2023 46 41.7 46 41.1091V33.3091H44V53.5182C44 54.1977 43.6562 54.7812 42.9688 55.2687C42.2812 55.7562 41.4583 56 40.5 56C39.5417 56 38.7188 55.7562 38.0312 55.2687C37.3438 54.7812 37 54.1977 37 53.5182V43.2364H35V53.5182C35 54.1977 34.6562 54.7812 33.9688 55.2687C33.2812 55.7562 32.4583 56 31.5 56C30.5417 56 29.7188 55.7562 29.0312 55.2687C28.3438 54.7812 28 54.1977 28 53.5182V33.3091H26V41.1091C26 41.7 25.7083 42.2023 25.125 42.6159C24.5417 43.0295 23.8333 43.2364 23 43.2364C22.1667 43.2364 21.4583 43.0295 20.875 42.6159C20.2917 42.2023 20 41.7 20 41.1091V31.8909C20 30.7091 20.5833 29.7045 21.75 28.8773C22.9167 28.05 24.3333 27.6364 26 27.6364H46C47.6667 27.6364 49.0833 28.05 50.25 28.8773C51.4167 29.7045 52 30.7091 52 31.8909ZM43 21.9636C43 23.3375 42.3177 24.5082 40.9531 25.4759C39.5885 26.4435 37.9375 26.9273 36 26.9273C34.0625 26.9273 32.4115 26.4435 31.0469 25.4759C29.6823 24.5082 29 23.3375 29 21.9636C29 20.5898 29.6823 19.419 31.0469 18.4514C32.4115 17.4838 34.0625 17 36 17C37.9375 17 39.5885 17.4838 40.9531 18.4514C42.3177 19.419 43 20.5898 43 21.9636Z" />
                                </mask>
                                <path
                                    d="M52 31.8909V41.1091C52 41.7 51.7083 42.2023 51.125 42.6159C50.5417 43.0295 49.8333 43.2364 49 43.2364C48.1667 43.2364 47.4583 43.0295 46.875 42.6159C46.2917 42.2023 46 41.7 46 41.1091V33.3091H44V53.5182C44 54.1977 43.6562 54.7812 42.9688 55.2687C42.2812 55.7562 41.4583 56 40.5 56C39.5417 56 38.7188 55.7562 38.0312 55.2687C37.3438 54.7812 37 54.1977 37 53.5182V43.2364H35V53.5182C35 54.1977 34.6562 54.7812 33.9688 55.2687C33.2812 55.7562 32.4583 56 31.5 56C30.5417 56 29.7188 55.7562 29.0312 55.2687C28.3438 54.7812 28 54.1977 28 53.5182V33.3091H26V41.1091C26 41.7 25.7083 42.2023 25.125 42.6159C24.5417 43.0295 23.8333 43.2364 23 43.2364C22.1667 43.2364 21.4583 43.0295 20.875 42.6159C20.2917 42.2023 20 41.7 20 41.1091V31.8909C20 30.7091 20.5833 29.7045 21.75 28.8773C22.9167 28.05 24.3333 27.6364 26 27.6364H46C47.6667 27.6364 49.0833 28.05 50.25 28.8773C51.4167 29.7045 52 30.7091 52 31.8909ZM43 21.9636C43 23.3375 42.3177 24.5082 40.9531 25.4759C39.5885 26.4435 37.9375 26.9273 36 26.9273C34.0625 26.9273 32.4115 26.4435 31.0469 25.4759C29.6823 24.5082 29 23.3375 29 21.9636C29 20.5898 29.6823 19.419 31.0469 18.4514C32.4115 17.4838 34.0625 17 36 17C37.9375 17 39.5885 17.4838 40.9531 18.4514C42.3177 19.419 43 20.5898 43 21.9636Z"
                                    fill="white" />
                                <path
                                    d="M46 33.3091H79V0.30909H46V33.3091ZM44 33.3091V0.30909H11V33.3091H44ZM37 43.2364H70V10.2364H37V43.2364ZM35 43.2364V10.2364H2V43.2364H35ZM28 33.3091H61V0.30909H28V33.3091ZM26 33.3091V0.30909H-7V33.3091H26ZM19 31.8909V41.1091H85V31.8909H19ZM19 41.1091C19 35.69 20.4138 30.2309 23.2438 25.3574C25.9532 20.6916 29.3439 17.6063 32.0369 15.6967L70.2132 69.5351C77.4454 64.4068 85 54.7132 85 41.1091H19ZM32.0369 15.6967C37.9134 11.5297 44.16 10.2364 49 10.2364V76.2364C55.5067 76.2364 63.1699 74.5294 70.2132 69.5351L32.0369 15.6967ZM49 10.2364C53.84 10.2364 60.0866 11.5297 65.9632 15.6967L27.7869 69.5351C34.8301 74.5294 42.4933 76.2364 49 76.2364V10.2364ZM65.9632 15.6967C68.6561 17.6063 72.0468 20.6916 74.7562 25.3574C77.5862 30.2309 79 35.69 79 41.1091H13C13 54.7132 20.5546 64.4068 27.7869 69.5351L65.9632 15.6967ZM79 41.1091V33.3091H13V41.1091H79ZM46 0.30909H44V66.3091H46V0.30909ZM11 33.3091V53.5182H77V33.3091H11ZM11 53.5182C11 47.9882 12.4802 42.5176 15.309 37.7157C18.0032 33.1423 21.3288 30.1591 23.8806 28.3496L62.0569 82.1879C69.1153 77.1829 77 67.4892 77 53.5182H11ZM23.8806 28.3496C29.5169 24.3529 35.5929 23 40.5 23V89C47.3238 89 55.0456 87.1596 62.0569 82.1879L23.8806 28.3496ZM40.5 23C45.4071 23 51.4831 24.3529 57.1194 28.3496L18.9431 82.1879C25.9544 87.1596 33.6762 89 40.5 89V23ZM57.1194 28.3496C59.6712 30.1591 62.9968 33.1423 65.691 37.7157C68.5198 42.5176 70 47.9882 70 53.5182H4C4 67.4892 11.8847 77.1829 18.9431 82.1879L57.1194 28.3496ZM70 53.5182V43.2364H4V53.5182H70ZM37 10.2364H35V76.2364H37V10.2364ZM2 43.2364V53.5182H68V43.2364H2ZM2 53.5182C2 47.9882 3.48023 42.5176 6.30904 37.7157C9.00319 33.1423 12.3288 30.1591 14.8806 28.3496L53.0569 82.1879C60.1153 77.1829 68 67.4892 68 53.5182H2ZM14.8806 28.3496C20.5169 24.3529 26.5929 23 31.5 23V89C38.3238 89 46.0456 87.1596 53.0569 82.1879L14.8806 28.3496ZM31.5 23C36.4071 23 42.4831 24.3529 48.1194 28.3496L9.9431 82.1879C16.9544 87.1596 24.6762 89 31.5 89V23ZM48.1194 28.3496C50.6712 30.1591 53.9968 33.1423 56.691 37.7157C59.5198 42.5176 61 47.9882 61 53.5182H-5C-5 67.4892 2.88474 77.1829 9.9431 82.1879L48.1194 28.3496ZM61 53.5182V33.3091H-5V53.5182H61ZM28 0.30909H26V66.3091H28V0.30909ZM-7 33.3091V41.1091H59V33.3091H-7ZM-7 41.1091C-7 35.69 -5.58618 30.2309 -2.75617 25.3574C-0.0467625 20.6916 3.34388 17.6063 6.03685 15.6967L44.2131 69.5351C51.4454 64.4068 59 54.7132 59 41.1091H-7ZM6.03685 15.6967C11.9134 11.5297 18.16 10.2364 23 10.2364V76.2364C29.5067 76.2364 37.1699 74.5294 44.2131 69.5351L6.03685 15.6967ZM23 10.2364C27.84 10.2364 34.0866 11.5297 39.9631 15.6967L1.78685 69.5351C8.83009 74.5294 16.4933 76.2364 23 76.2364V10.2364ZM39.9631 15.6967C42.6561 17.6063 46.0468 20.6916 48.7562 25.3574C51.5862 30.2309 53 35.69 53 41.1091H-13C-13 54.7132 -5.44541 64.4068 1.78685 69.5351L39.9631 15.6967ZM53 41.1091V31.8909H-13V41.1091H53ZM53 31.8909C53 37.0146 51.6591 42.2003 48.9749 46.8227C46.4114 51.2373 43.2395 54.0937 40.8381 55.7965L2.66185 1.95809C-5.15376 7.50007 -13 17.6959 -13 31.8909H53ZM40.8381 55.7965C35.5449 59.5498 30.0067 60.6364 26 60.6364V-5.36364C18.66 -5.36364 10.2884 -3.44985 2.66185 1.95809L40.8381 55.7965ZM26 60.6364H46V-5.36364H26V60.6364ZM46 60.6364C41.9933 60.6364 36.4551 59.5498 31.1619 55.7965L69.3382 1.95809C61.7116 -3.44985 53.34 -5.36364 46 -5.36364V60.6364ZM31.1619 55.7965C28.7605 54.0937 25.5886 51.2373 23.0251 46.8227C20.3409 42.2003 19 37.0146 19 31.8909H85C85 17.6959 77.1538 7.50007 69.3382 1.95809L31.1619 55.7965ZM10 21.9636C10 16.8975 11.3357 11.7878 13.9768 7.25596C16.4938 2.93714 19.5851 0.173338 21.865 -1.44333L60.0413 52.395C67.9856 46.7618 76 36.4206 76 21.9636H10ZM21.865 -1.44333C26.9265 -5.03243 32.216 -6.07273 36 -6.07273V59.9273C43.659 59.9273 52.2506 57.9194 60.0413 52.395L21.865 -1.44333ZM36 -6.07273C39.784 -6.07273 45.0735 -5.03243 50.135 -1.44333L11.9587 52.395C19.7494 57.9194 28.341 59.9273 36 59.9273V-6.07273ZM50.135 -1.44333C52.4149 0.173338 55.5062 2.93714 58.0232 7.25596C60.6643 11.7878 62 16.8975 62 21.9636H-4C-4 36.4206 4.01441 46.7618 11.9587 52.395L50.135 -1.44333ZM62 21.9636C62 27.0298 60.6643 32.1394 58.0232 36.6713C55.5062 40.9901 52.4149 43.7539 50.135 45.3706L11.9587 -8.46777C4.0144 -2.83452 -4 7.50671 -4 21.9636H62ZM50.135 45.3706C45.0735 48.9597 39.7839 50 36 50V-16C28.3411 -16 19.7494 -13.9921 11.9587 -8.46777L50.135 45.3706ZM36 50C32.2161 50 26.9265 48.9597 21.865 45.3706L60.0413 -8.46777C52.2506 -13.9921 43.6589 -16 36 -16V50ZM21.865 45.3706C19.5851 43.7539 16.4938 40.9901 13.9768 36.6713C11.3357 32.1394 10 27.0298 10 21.9636H76C76 7.50671 67.9856 -2.83452 60.0413 -8.46777L21.865 45.3706Z"
                                    fill="white" mask="url(#path-2-inside-1_0_1)" />
                            </g>
                            <defs>
                                <linearGradient id="paint0_linear_0_1" x1="72" y1="36.0001" x2="-5.625" y2="36.0001"
                                    gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#1976CC" />
                                    <stop offset="1" stop-color="#0FABCD" />
                                </linearGradient>
                                <clipPath id="clip0_0_1">
                                    <rect width="32" height="39" fill="white" transform="translate(20 17)" />
                                </clipPath>
                            </defs>
                        </svg>

                    </div>
                </div>
            </div>
        </div>

        <div class="row box-dashboard d-flex align-items-center">
            <div class="col-3">
                <div class="row">
                    <div class="col-12">
                        <h3 class="title-box">Biểu đồ tỷ lệ giới tính</h3>
                    </div>
                    <div class="col-12">
                        <Doughnut :data="dataDoughnutSex" type='doughnut' v-if="dataDoughnutSex" :options="optionsDoughnut"
                            :plugins="configPlugins('Tổng số người')" />
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="row">
                    <div class="col-12">
                        <h3 class="title-box">Biểu đồ theo nhóm tuổi</h3>
                    </div>
                    <div class="col-12">
                        <Doughnut :data="dataDoughnutAge" v-if="dataDoughnutAge" type='doughnut' :options="optionsDoughnut"
                            :plugins="configPlugins('Tổng số người')" />
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="row">
                    <div class="col-12">
                        <h3 class="title-box">Biểu đồ theo dịch vụ khám</h3>
                    </div>
                    <div class="col-12">
                        <Doughnut :data="dataDoughnutService" v-if="dataDoughnutService" type='doughnut'
                            :options="optionsDoughnut" :plugins="configPlugins('Tổng số dịch vụ')" />
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="row">
                    <div class="col-12">
                        <h3 class="title-box">Biểu đồ loại dịch vụ khám</h3>
                    </div>
                    <div class="col-12">
                        <Doughnut :data="dataDoughnutServiceType" v-if="dataDoughnutServiceType" type='doughnut'
                            :options="optionsDoughnut" :plugins="configPlugins('Tổng số dịch vụ')" />
                    </div>
                </div>
            </div>
        </div>
        <div class="row box-dashboard">
            <div class="col-12">
                <h3 class="title-box">Biểu đồ 10 dịch vụ khám nhiều nhất</h3>
            </div>
            <div class="col-11" style="height: 400px;">
                <canvas ref="barChartService"></canvas>
            </div>
        </div>

        <div class="row box-dashboard">
            <div class="col-12">
                <h3 class="title-box">Biểu đồ 10 bệnh phổ biến nhất</h3>
            </div>
            <div class="col-11" style="height: 400px;">
                <canvas ref="barChartDisease"></canvas>
            </div>
        </div>
    </div>
</template>

<script>
import ChartDataLabels from 'chartjs-plugin-datalabels';

import {
    Chart as ChartJS,
    Title,
    Tooltip,
    Legend,
    BarElement,
    CategoryScale,
    LinearScale,
    ArcElement,
    LineElement,
    PointElement
} from 'chart.js'
import { Bar, Doughnut, Line as LineChart } from 'vue-chartjs'
import _ from "lodash";
import moment from 'moment';

ChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend, ArcElement, ChartDataLabels, LineElement, PointElement)

export default {

    props: {
        locales: { default: null },
        pageTitle: { default: null, String },
    },

    components: {
        Bar,
        Doughnut,
        LineChart
    },

    data() {
        return {
            date_search: [],
            summary_kcb: {
                total: '__',
                not_done: '__',
                not_done_percent: '__',
                new_kcb: '__',
                new_percent: '__',
                again_kcb: '__',
                again_percent: '__',

            },
            summary_patient: {
                female: '__',
                female_percent: '__',
                children: '__',
                children_percent: '__',

                male: '__',
                male_percent: '__',
                old: '__',
                old_percent: '__',
            },
            picker_option: {
                shortcuts: [
                    {
                        text: 'Hôm nay',
                        onClick(picker) {
                            const end = new Date();
                            const start = new Date();

                            picker.$emit('pick', [start, end]);
                        }
                    },
                    {
                        text: 'Hôm qua',
                        onClick(picker) {
                            const end = new Date();
                            const start = new Date();
                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 1);
                            picker.$emit('pick', [start, end]);
                        }
                    },
                    {
                        text: '1 tuần',
                        onClick(picker) {
                            const end = new Date();
                            const start = new Date();
                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);
                            picker.$emit('pick', [start, end]);
                        }
                    },
                    {
                        text: '2 tuần',
                        onClick(picker) {
                            const end = new Date();
                            const start = new Date();
                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 14);
                            picker.$emit('pick', [start, end]);
                        }
                    },
                    {
                        text: '1 tháng',
                        onClick(picker) {
                            const end = new Date();
                            const start = new Date();
                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);
                            picker.$emit('pick', [start, end]);
                        }
                    },
                    {
                        text: '3 tháng',
                        onClick(picker) {
                            const end = new Date();
                            const start = new Date();
                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);
                            picker.$emit('pick', [start, end]);
                        }
                    },
                    {
                        text: '6 tháng',
                        onClick(picker) {
                            const end = new Date();
                            const start = new Date();
                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 180);
                            picker.$emit('pick', [start, end]);
                        }
                    },
                    {
                        text: '1 năm',
                        onClick(picker) {
                            const end = new Date();
                            const start = new Date();
                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 365);
                            picker.$emit('pick', [start, end]);
                        }
                    },
                ],
                disabledDate(time) {
                    time = moment(time).format('YYYY-MM-DD');
                    const currentDate = moment().format('YYYY-MM-DD');
                    return time < moment().subtract(1, 'year').format('YYYY-MM-DD') || time > currentDate;
                }
            },
            dataBar: {
                labels: [],
                data: [],
            },

            dataBarService: {
                labels: [],
                data: [],
            },

            dataDoughnutSex: null,
            dataDoughnutAge: null,
            dataDoughnutService: null,
            dataDoughnutServiceType: null,
            dataLineChartNumberExamination: {
                labels: [],
                datasets: []
            },
            optionsDoughnut: {
                responsive: true,
                tooltips: {
                    enabled: false,
                },
                plugins: {
                    legend: {
                        display: true,
                        position: 'right',
                        labels: {
                            usePointStyle: true,
                            useBorderRadius: false,
                            borderRadius: 50,
                            padding: 20,
                            boxWidth: 50,
                        },
                    },

                    datalabels: {
                        display: 'true',
                        color: 'black',
                        font: {
                            size: 14,
                            // weight: '500'
                        },

                        formatter: (value, ctx) => {
                            let sum = 0;
                            let dataArr = ctx.chart.data.datasets[0].data;
                            dataArr.map(data => {
                                sum += data;
                            });
                            let percentage = (value * 100 / sum).toFixed() + "%";
                            return percentage;
                        },
                    },
                },


            },

            optionsBar: {
                responsive: true,
                maintainAspectRatio: false
            },

            optionsLine: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'bottom',
                        labels: {
                            usePointStyle: true,
                            useBorderRadius: false,
                            borderRadius: 50,
                            padding: 20,
                        },
                    },

                    tooltip: {
                        callbacks: {
                            footer: function (items) {
                                return 'Total: ' + items.reduce((a, b) => a + b.parsed.y, 0)
                            }
                        }
                    },
                },

                interaction: {
                    mode: 'index',
                    intersect: false
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                        }
                    }
                }
            },

            barChartServiceInstance: null,
            barChartDiseaseInstance: null,
            dataBarDisease: {
                labels: [],
                data: [],
            },
        }
    },
    methods: {

        renderBarChartService() {
            // Get the canvas element
            const canvas = this.$refs.barChartService;
            const ctx = canvas.getContext('2d');

            // Create a linear gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            gradient.addColorStop(0, '#1976CC');
            gradient.addColorStop(1, '#0FABCD');

            // Dummy data for demonstration
            const data = {
                labels: this.dataBarService.labels,
                datasets: [{
                    label: 'Sample Data',
                    data: this.dataBarService.data,
                    backgroundColor: gradient, // Use the linear gradient as the background color
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1,
                    barPercentage: 0.5,
                }]
            };

            // Chart configuration
            const options = {
                maintainAspectRatio: false,
                responsive: true,

                scales: {
                    y: {
                        beginAtZero: true
                    },
                    x: {
                        barThickness: 40, // Điều chỉnh độ cao của thanh
                    },
                },
                plugins: {
                    legend: {
                        display: false,
                    },
                    datalabels: {
                        display: false,
                    }
                }
            };

            // Create the bar chart
            this.barChartServiceInstance = new ChartJS(ctx, {
                type: 'bar',
                data: data,
                options: options
            });
        },

        renderBarChartDisease() {
            // Get the canvas element
            const canvas = this.$refs.barChartDisease;
            const ctx = canvas.getContext('2d');

            // Create a linear gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            gradient.addColorStop(0, '#1976CC');
            gradient.addColorStop(1, '#0FABCD');

            // Dummy data for demonstration
            const data = {
                labels: this.dataBarDisease.labels,
                datasets: [{
                    label: 'Sample Data',
                    data: this.dataBarDisease.data,
                    backgroundColor: gradient, // Use the linear gradient as the background color
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1,
                    barPercentage: 0.5,
                }]
            };

            // Chart configuration
            const options = {
                maintainAspectRatio: false,
                responsive: true,

                scales: {
                    y: {
                        beginAtZero: true
                    },
                    x: {
                        barThickness: 40, // Điều chỉnh độ cao của thanh
                    },
                },
                plugins: {
                    legend: {
                        display: false,
                    },
                    datalabels: {
                        display: false,
                    }
                }
            };

            // Create the bar chart
            this.barChartDiseaseInstance = new ChartJS(ctx, {
                type: 'bar',
                data: data,
                options: options
            });
        },

        getKCB() {

            const properties = {

                date_search: this.date_search,

            };

            window.axios.get(route('api.dashboard.summaryKCB', properties))
                .then((response) => {

                    this.summary_kcb = response.data;

                });
        },
        getSummaryPatient() {

            const properties = {

                date_search: this.date_search,

            };

            window.axios.get(route('api.dashboard.summaryPatient', properties))
                .then((response) => {

                    this.summary_patient = response.data;

                });
        },

        getSummarySex() {
            const properties = {
                date_search: this.date_search,

            };
            window.axios.get(route('api.dashboard.summarySex', properties))
                .then((response) => {
                    this.dataDoughnutSex = response.data;
                });
        },

        getSummaryAge() {
            const properties = {
                date_search: this.date_search,
            };

            window.axios.get(route('api.dashboard.summaryAge', properties))
                .then((response) => {
                    this.dataDoughnutAge = response.data;
                });
        },

        getSummaryService() {
            const properties = {
                date_search: this.date_search,
            };

            window.axios.get(route('api.dashboard.summaryService', properties))
                .then((response) => {
                    this.dataDoughnutService = response.data;
                });
        },

        getSummaryServiceType() {
            const properties = {
                date_search: this.date_search,
            };

            window.axios.get(route('api.dashboard.summaryServiceType', properties))
                .then((response) => {
                    this.dataDoughnutServiceType = response.data;
                });
        },

        getBarChartService() {
            const properties = {
                date_search: this.date_search,
            };

            window.axios.get(route('api.dashboard.barChartService', properties))
                .then((response) => {
                    this.dataBarService = response.data;
                });
        },

        getBarCharttDisease() {
            const properties = {
                date_search: this.date_search,
            };

            window.axios.get(route('api.dashboard.barChartDisease', properties))
                .then((response) => {
                    this.dataBarDisease = response.data;
                });
        },

        getLineChartNumberExamination() {
            const properties = {
                date_search: this.date_search,
            };

            window.axios.get(route('api.dashboard.lineChartNumberExamination', properties))
                .then((response) => {
                    this.dataLineChartNumberExamination = response.data;
                });
        },

        configPlugins(text) {
            return [{
                id: 'text',
                beforeDraw: function (chart, a, b) {
                    var width = chart.width,
                        height = chart.height,
                        ctx = chart.ctx;

                    ctx.restore();
                    var fontSize = (height / 420).toFixed(2);
                    ctx.font = fontSize + "em sans-serif";
                    ctx.textBaseline = "middle";

                    ctx.fillText(text,
                        chart?.getDatasetMeta(0)?.data?.[0]?.x - ctx.measureText(text).width / 2,
                        chart?.getDatasetMeta(0)?.data?.[0]?.y - 10
                    );
                    ctx.save();

                    ctx = chart.ctx;

                    ctx.restore();
                    var fontSize = (height / 320).toFixed(2);
                    ctx.font = fontSize + "em sans-serif";
                    ctx.textBaseline = "middle";
                    let sum = 0;

                    let dataArr = chart.data.datasets[0].data;
                    dataArr.map(data => {
                        sum += data;
                    });

                    ctx.fillText(sum,
                        chart?.getDatasetMeta(0)?.data?.[0]?.x - ctx.measureText(sum).width / 2,
                        chart?.getDatasetMeta(0)?.data?.[0]?.y + 5
                    )
                    ctx.save();
                }
            }]
        },

        getAllData() {
            this.getKCB()
            this.getSummaryPatient()
            this.getSummarySex()
            this.getSummaryAge()
            this.getSummaryService()
            this.getSummaryServiceType()
            this.getBarChartService()
            this.getBarCharttDisease()
            this.getLineChartNumberExamination()
        },

        destroyChartService() {
            // Destroy the existing chart instance if it exists
            if (this.barChartServiceInstance) {
                this.barChartServiceInstance.destroy();
            }
            
        },

        destroyChartDisease() {
            // Destroy the existing chart instance if it exists
            if (this.barChartDiseaseInstance) {
                this.barChartDiseaseInstance.destroy();
            }

            
        },


    },
    mounted() {
        let current_date = new Date()
        let date_format = ("0" + current_date.getDate()).slice(-2) + '/' + ("0" + (current_date.getMonth() + 1)).slice(-2) + '/' + current_date.getFullYear()
        this.date_search = [date_format, date_format]
        this.getAllData()
        this.renderBarChartService();
        this.renderBarChartDisease();


    },
    watch: {
        dataBarService: {
            deep: true,
            handler(newData) {
                // Rerender the chart when dataBar changes

                this.destroyChartService();
                this.renderBarChartService();
            },
        },

        dataBarDisease: {
            deep: true,
            handler(newData) {
                // Rerender the chart when dataBar changes

                this.destroyChartDisease();
                this.renderBarChartDisease();
            },
        },
    }
}
</script>

<style scoped>
.title-box {
    color: var(--TextColor_pri, #3B4850);
    font-feature-settings: 'case' on;
    font-size: 20px;
    font-style: normal;
    line-height: normal;
    letter-spacing: 0.1px;
    margin-bottom: 20px;
    font-weight: 700;
}

.box-dashboard {
    margin-bottom: 50px;
    /* border-bottom: 1px solid var(--Line, #DEE2E6); */
}

.w-20 {
    width: 20%;
    padding: 0px 5px;
}

.small-box {
    border-radius: 12px;
    box-shadow: 0px 2px 8px 0px rgba(0, 0, 0, 0.10);
    height: 150px;
}

.small-box .inner {
    color: var(--White, #FFF);
    font-feature-settings: 'case' on;
    font-size: 0.8rem;
    font-style: normal;
    font-weight: 500;
    line-height: 24px;
    letter-spacing: 0.08px;
    padding: 20px 0px 20px 20px;
    margin-right: 5px;
}

.small-box .inner h3 {
    font-size: 26px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
    letter-spacing: 0.32px;
    margin-bottom: 0px;
}

.small-box .inner p {
    margin-bottom: 0px !important;
}

.svg-icon {
    margin-right: 25px;
}

.account_percent {
    margin-top: 17px;
}

.account_percent span {
    color: var(--TextColor_pri, #3B4850);
    font-feature-settings: 'case' on;
    font-size: 16px;
    font-style: normal;
    font-weight: 400;
    line-height: 24px;
    /* 150% */
    letter-spacing: 0.08px;
}

.account_percent p {
    color: var(--TextColor_pri, #3B4850);
    font-feature-settings: 'case' on;
    font-size: 16px;
    font-style: normal;
    font-weight: 500;
    line-height: 24px;
    letter-spacing: 0.08px;
}

.border-doughnut {
    height: 170px;
    border-left: 1px solid var(--Line, #DEE2E6);
    margin-left: 40px;
    margin-right: 50px;
}

.line-chart {
    border-radius: 14.933px;
    background: var(--Common-1, #FFF);
    box-shadow: 0px 2.987px 11.946px 0px rgba(0, 0, 0, 0.04);
    padding: 16px;
}

.border-index {
    height: 28px;
    border-left: 4px solid var(--Line, #FFF);
    margin: 0px 10px;
}
</style>
